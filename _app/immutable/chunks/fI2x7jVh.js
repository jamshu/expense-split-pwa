import{i as K,c as te,Y as Q,e as U,h as I,Z as ne,d as se,y as X,_ as ie,r as le,H as fe,s as Z,f as V,n as S,a0 as ue,a1 as ce,j as F,l as oe,a2 as R,a3 as L,k as de,a4 as $,V as ve,a5 as z,a6 as W,a7 as he,m as j,p as pe,a8 as _e,a9 as Y,q as me,aa as k,ab as Ae,ac as Ee,ad as we,ae as Ne,af as Te,ag as Me}from"./DNUg-ClE.js";import{b as ge}from"./Bn57phs2.js";function Se(i,a){return a}function Ie(i,a,e){for(var r=i.items,n=[],f=a.length,s=0;s<f;s++)we(a[s].e,n,!0);var o=f>0&&n.length===0&&e!==null;if(o){var A=e.parentNode;Ne(A),A.append(e),r.clear(),M(i,a[0].prev,a[f-1].next)}Te(n,()=>{for(var h=0;h<f;h++){var p=a[h];o||(r.delete(p.k),M(i,p.prev,p.next)),k(p.e,!o)}})}function De(i,a,e,r,n,f=null){var s=i,o={flags:a,items:new Map,first:null},A=(a&Q)!==0;if(A){var h=i;s=I?U(ne(h)):h.appendChild(K())}I&&se();var p=null,b=!1,w=new Map,y=ie(()=>{var v=e();return he(v)?v:v==null?[]:W(v)}),l,d;function c(){be(d,l,o,w,s,n,a,r,e),f!==null&&(l.length===0?p?j(p):p=F(()=>f(s)):p!==null&&pe(p,()=>{p=null}))}te(()=>{d??=Me,l=X(y);var v=l.length;if(b&&v===0)return;b=v===0;let E=!1;if(I){var N=le(s)===fe;N!==(v===0)&&(s=Z(),U(s),V(!1),E=!0)}if(I){for(var g=null,_,t=0;t<v;t++){if(S.nodeType===ue&&S.data===ce){s=S,E=!0,V(!1);break}var u=l[t],m=r(u,t);_=J(S,o,g,null,u,m,t,n,a,e),o.items.set(m,_),g=_}v>0&&U(Z())}if(I)v===0&&f&&(p=F(()=>f(s)));else if(oe()){var C=new Set,D=de;for(t=0;t<v;t+=1){u=l[t],m=r(u,t);var x=o.items.get(m)??w.get(m);x?(a&(R|L))!==0&&ee(x,u,t,a):(_=J(null,o,null,null,u,m,t,n,a,e,!0),w.set(m,_)),C.add(m)}for(const[T,H]of o.items)C.has(T)||D.skipped_effects.add(H.e);D.add_callback(c)}else c();E&&V(!0),X(y)}),I&&(s=S)}function be(i,a,e,r,n,f,s,o,A){var h=(s&Ae)!==0,p=(s&(R|L))!==0,b=a.length,w=e.items,y=e.first,l=y,d,c=null,v,E=[],N=[],g,_,t,u;if(h)for(u=0;u<b;u+=1)g=a[u],_=o(g,u),t=w.get(_),t!==void 0&&(t.a?.measure(),(v??=new Set).add(t));for(u=0;u<b;u+=1){if(g=a[u],_=o(g,u),t=w.get(_),t===void 0){var m=r.get(_);if(m!==void 0){r.delete(_),w.set(_,m);var C=c?c.next:l;M(e,c,m),M(e,m,C),B(m,C,n),c=m}else{var D=l?l.e.nodes_start:n;c=J(D,e,c,c===null?e.first:c.next,g,_,u,f,s,A)}w.set(_,c),E=[],N=[],l=c.next;continue}if(p&&ee(t,g,u,s),(t.e.f&Y)!==0&&(j(t.e),h&&(t.a?.unfix(),(v??=new Set).delete(t))),t!==l){if(d!==void 0&&d.has(t)){if(E.length<N.length){var x=N[0],T;c=x.prev;var H=E[0],P=E[E.length-1];for(T=0;T<E.length;T+=1)B(E[T],x,n);for(T=0;T<N.length;T+=1)d.delete(N[T]);M(e,H.prev,P.next),M(e,c,H),M(e,P,x),l=x,c=P,u-=1,E=[],N=[]}else d.delete(t),B(t,l,n),M(e,t.prev,t.next),M(e,t,c===null?e.first:c.next),M(e,c,t),c=t;continue}for(E=[],N=[];l!==null&&l.k!==_;)(l.e.f&Y)===0&&(d??=new Set).add(l),N.push(l),l=l.next;if(l===null)continue;t=l}E.push(t),c=t,l=t.next}if(l!==null||d!==void 0){for(var O=d===void 0?[]:W(d);l!==null;)(l.e.f&Y)===0&&O.push(l),l=l.next;var q=O.length;if(q>0){var ae=(s&Q)!==0&&b===0?n:null;if(h){for(u=0;u<q;u+=1)O[u].a?.measure();for(u=0;u<q;u+=1)O[u].a?.fix()}Ie(e,O,ae)}}h&&me(()=>{if(v!==void 0)for(t of v)t.a?.apply()}),i.first=e.first&&e.first.e,i.last=c&&c.e;for(var re of r.values())k(re.e);r.clear()}function ee(i,a,e,r){(r&R)!==0&&$(i.v,a),(r&L)!==0?$(i.i,e):i.i=e}function J(i,a,e,r,n,f,s,o,A,h,p){var b=(A&R)!==0,w=(A&_e)===0,y=b?w?ve(n,!1,!1):z(n):n,l=(A&L)===0?s:z(s),d={i:l,v:y,k:f,a:null,e:null,prev:e,next:r};try{if(i===null){var c=document.createDocumentFragment();c.append(i=K())}return d.e=F(()=>o(i,y,l,h),I),d.e.prev=e&&e.e,d.e.next=r&&r.e,e===null?p||(a.first=d):(e.next=d,e.e.next=d.e),r!==null&&(r.prev=d,r.e.prev=d.e),d}finally{}}function B(i,a,e){for(var r=i.next?i.next.e.nodes_start:e,n=a?a.e.nodes_start:e,f=i.e.nodes_start;f!==null&&f!==r;){var s=Ee(f);n.before(f),f=s}}function M(i,a,e){a===null?i.first=e:(a.next=e,a.e.next=e&&e.e),e!==null&&(e.prev=a,e.e.prev=a&&a.e)}const G=[...` 	
\r\fÂ \v\uFEFF`];function ye(i,a,e){var r=i==null?"":""+i;if(e){for(var n in e)if(e[n])r=r?r+" "+n:n;else if(r.length)for(var f=n.length,s=0;(s=r.indexOf(n,s))>=0;){var o=s+f;(s===0||G.includes(r[s-1]))&&(o===r.length||G.includes(r[o]))?r=(s===0?"":r.substring(0,s))+r.substring(o+1):s=o}}return r===""?null:r}function He(i,a,e,r,n,f){var s=i.__className;if(I||s!==e||s===void 0){var o=ye(e,r,f);(!I||o!==i.getAttribute("class"))&&(o==null?i.removeAttribute("class"):i.className=o),i.__className=e}else if(f&&n!==f)for(var A in f){var h=!!f[A];(n==null||h!==!!n[A])&&i.classList.toggle(A,h)}return f}class xe{constructor(){this.apiUrl=`${ge}/api/odoo`}async callApi(a,e){const n=await(await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:a,data:e})})).json();if(!n.success)throw new Error(n.error||"API Error");return n}async createExpense(a){return(await this.callApi("create",a)).id}async searchExpenses(a=[],e=[]){return(await this.callApi("search",{domain:a,fields:e})).results}async searchModel(a,e=[],r=[]){return(await this.callApi("search_model",{model:a,domain:e,fields:r})).results}async fetchPartners(){return await this.searchModel("res.partner",[],["id","display_name"])}async fetchDefaultParticipants(){const a=await this.searchModel("x_expense_participants",[],["id","x_studio_default_participants"]);if(!Array.isArray(a)||a.length===0)return[];const r=(a[0].x_studio_default_participants||[]).map(n=>Number(n));return r.length===0?[]:await this.searchModel("res.partner",[["id","in",r]],["id","display_name"])}formatMany2one(a){return a?Number(a):!1}formatMany2many(a){return!Array.isArray(a)||a.length===0?[]:[[6,0,a.map(e=>Number(e))]]}async updateExpense(a,e){return(await this.callApi("update",{id:a,values:e})).result}async deleteExpense(a){return(await this.callApi("delete",{id:a})).result}}const Re=new xe;export{De as e,Se as i,Re as o,He as s};
